{% extends 'base.html' %} {% load static %}
<!-- main -->
{% block main %}
<main>
	<div class="card rounded-0 border-0" style="height: 320px">
		<div class="card-img bg-img-for-custom-col rounded-0 shadow" style="background-image: url('{{ course_detail.thumbnail_img.url }}')"></div>
		<div class="card-img-overlay">
			<div class="container my-2">
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb mb-0 bg-light custom-breadcrumb-section box-shadow-3">
						<li class="breadcrumb-item">
							<a href="{% url 'home-page' %}">
								<i class="fa-solid fa-house"></i>
							</a>
						</li>
						<li class="breadcrumb-item">
							<a href="{% url 'course-list-page' %}">Course</a>
						</li>
						<li class="breadcrumb-item active" aria-current="page">{{ course_detail.name }}</li>
					</ol>
				</nav>
			</div>
			<div class="container my-5">
				<div class="d-flex flex-wrap justify-content-center">
					<div class="fs-3 fw-semibold text-primary rounded-4 py-2 px-4 bg-light">{{ course_detail.name }}</div>
				</div>
			</div>
		</div>
	</div>
	<div class="container mt-3 mb-5">
		<!-- Download all button -->
		<div class="d-flex flex-wrap justify-content-end mb-3">
			<button class="btn btn-primary" id="download-all-btn">
				Download all
				<i class="fa-solid fa-download ms-1"></i>
			</button>
		</div>

		<div class="bg-light box-shadow-2 pt-3 pb-5 px-4 rounded-2">
			<!-- Lectures -->
			{% if lecture_list %}
			<div>
				<div class="fs-4 align-items-center">
					<i class="fa-solid fa-tags me-1"></i>
					Lectures
					<i class="fa-solid fa-download text-primary opacity-75 small ms-1"></i>
				</div>
				<div class="mt-2" style="padding: 0 2rem">
					<div class="accordion" id="display-lectures">
						{% for file in lecture_list %}
						<div class="accordion-item">
							<h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="" aria-expanded="false" aria-controls="">
									<i class="fa-regular fa-file me-2"></i>
									{{ file.name }}
									<span class="fw-lighter ms-2">[{{ file.file_uploaded.size|filesizeformat }}]</span>
								</button>
							</h2>
							<div class="accordion-collapse collapse" aria-labelledby="" data-bs-parent="#display-lectures">
								<div class="accordion-body d-flex flex-wrap justify-content-between align-items-center">
									<a class="btn btn-sm btn-primary me-1 ms-3" onclick="window.open('{{ file.file_uploaded.url }}', '_blank')">
										View
										<i class="fa-solid fa-up-right-from-square ms-1"></i>
									</a>
									<div class="small fst-italic">Uploaded by <span class="fw-bold">{{ file.uploaded_by }}</span> on <span class="fw-bold">{{ file.date_modified|date:"d/m/Y" }}</span></div>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>
			</div>
			{% endif %}
			<!-- Labs -->
			{% if lab_list %}
			<div class="mt-3">
				<div class="fs-4 align-items-center">
					<i class="fa-solid fa-tags me-1"></i>
					Labs
					<i class="fa-solid fa-download text-primary opacity-75 small ms-1"></i>
				</div>
				<div class="mt-2" style="padding: 0 2rem">
					<div class="accordion" id="display-labs">
						{% for file in lab_list %}
						<div class="accordion-item">
							<h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="" aria-expanded="false" aria-controls="">
									<i class="fa-regular fa-file me-2"></i>
									{{ file.name }}
									<span class="fw-lighter ms-2">[{{ file.file_uploaded.size|filesizeformat }}]</span>
								</button>
							</h2>
							<div class="accordion-collapse collapse" aria-labelledby="" data-bs-parent="#display-labs">
								<div class="accordion-body d-flex flex-wrap justify-content-between align-items-center">
									<a class="btn btn-sm btn-primary me-1 ms-3" onclick="window.open('{{ file.file_uploaded.url }}', '_blank')">
										View
										<i class="fa-solid fa-up-right-from-square ms-1"></i>
									</a>
									<div class="small fst-italic">Uploaded by <span class="fw-bold">{{ file.uploaded_by }}</span> on <span class="fw-bold">{{ file.date_modified|date:"d/m/Y" }}</span></div>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>
			</div>
			{% endif %}
			<!-- Exams -->
			{% if exam_list %}
			<div class="mt-3">
				<div class="fs-4 align-items-center">
					<i class="fa-solid fa-tags me-1"></i>
					Exams
					<i class="fa-solid fa-download text-primary opacity-75 small ms-1"></i>
				</div>
				<div class="mt-2" style="padding: 0 2rem">
					<div class="accordion" id="display-exams">
						{% for file in exam_list %}
						<div class="accordion-item">
							<h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="" aria-expanded="false" aria-controls="">
									<i class="fa-regular fa-file me-2"></i>
									{{ file.name }}
									<span class="fw-lighter ms-2">[{{ file.file_uploaded.size|filesizeformat }}]</span>
								</button>
							</h2>
							<div class="accordion-collapse collapse" aria-labelledby="" data-bs-parent="#display-exams">
								<div class="accordion-body d-flex flex-wrap justify-content-between align-items-center">
									<a class="btn btn-sm btn-primary me-1 ms-3" onclick="window.open('{{ file.file_uploaded.url }}', '_blank')">
										View
										<i class="fa-solid fa-up-right-from-square ms-1"></i>
									</a>
									<div class="small fst-italic">Uploaded by <span class="fw-bold">{{ file.uploaded_by }}</span> on <span class="fw-bold">{{ file.date_modified|date:"d/m/Y" }}</span></div>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>
			</div>
			{% endif %}
			<!-- Exercises -->
			{% if exercise_list %}
			<div class="mt-3">
				<div class="fs-4 align-items-center">
					<i class="fa-solid fa-tags me-1"></i>
					Exercises
					<i class="fa-solid fa-download text-primary opacity-75 small ms-1"></i>
				</div>
				<div class="mt-2" style="padding: 0 2rem">
					<div class="accordion" id="display-exercises">
						{% for file in exercise_list %}
						<div class="accordion-item">
							<h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="" aria-expanded="false" aria-controls="">
									<i class="fa-regular fa-file me-2"></i>
									{{ file.name }}
									<span class="fw-lighter ms-2">[{{ file.file_uploaded.size|filesizeformat }}]</span>
								</button>
							</h2>
							<div class="accordion-collapse collapse" aria-labelledby="" data-bs-parent="#display-exercises">
								<div class="accordion-body d-flex flex-wrap justify-content-between align-items-center">
									<a class="btn btn-sm btn-primary me-1 ms-3" onclick="window.open('{{ file.file_uploaded.url }}', '_blank')">
										View
										<i class="fa-solid fa-up-right-from-square ms-1"></i>
									</a>
									<div class="small fst-italic">Uploaded by <span class="fw-bold">{{ file.uploaded_by }}</span> on <span class="fw-bold">{{ file.date_modified|date:"d/m/Y" }}</span></div>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>
			</div>
			{% endif %}
			<!-- Books -->
			{% if book_list %}
			<div class="mt-3">
				<div class="fs-4 align-items-center">
					<i class="fa-solid fa-tags me-1"></i>
					Books - References
					<i class="fa-solid fa-download text-primary opacity-75 small ms-1"></i>
				</div>
				<div class="mt-2" style="padding: 0 2rem">
					<div class="accordion" id="display-books">
						{% for file in book_list %}
						<div class="accordion-item">
							<h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="" aria-expanded="false" aria-controls="">
									<i class="fa-regular fa-file me-2"></i>
									{{ file.name }}
									<span class="fw-lighter ms-2">[{{ file.file_uploaded.size|filesizeformat }}]</span>
								</button>
							</h2>
							<div class="accordion-collapse collapse" aria-labelledby="" data-bs-parent="#display-books">
								<div class="accordion-body d-flex flex-wrap justify-content-between align-items-center">
									<a class="btn btn-sm btn-primary me-1 ms-3" onclick="window.open('{{ file.file_uploaded.url }}', '_blank')">
										View
										<i class="fa-solid fa-up-right-from-square ms-1"></i>
									</a>
									<div class="small fst-italic">Uploaded by <span class="fw-bold">{{ file.uploaded_by }}</span> on <span class="fw-bold">{{ file.date_modified|date:"d/m/Y" }}</span></div>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>
			</div>
			{% endif %}
			<!-- Others -->
			{% if other_list %}
			<div class="mt-3">
				<div class="fs-4 align-items-center">
					<i class="fa-solid fa-tags me-1"></i>
					Others
					<i class="fa-solid fa-download text-primary opacity-75 small ms-1"></i>
				</div>
				<div class="mt-2" style="padding: 0 2rem">
					<div class="accordion" id="display-others">
						{% for file in other_list %}
						<div class="accordion-item">
							<h2 class="accordion-header">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="" aria-expanded="false" aria-controls="">
									<i class="fa-regular fa-file me-2"></i>
									{{ file.name }}
									<span class="fw-lighter ms-2">[{{ file.file_uploaded.size|filesizeformat }}]</span>
								</button>
							</h2>
							<div class="accordion-collapse collapse" aria-labelledby="" data-bs-parent="#display-others">
								<div class="accordion-body d-flex flex-wrap justify-content-between align-items-center">
									<a class="btn btn-sm btn-primary me-1 ms-3" onclick="window.open('{{ file.file_uploaded.url }}', '_blank')">
										View
										<i class="fa-solid fa-up-right-from-square ms-1"></i>
									</a>
									<div class="small fst-italic">Uploaded by <span class="fw-bold">{{ file.uploaded_by }}</span> on <span class="fw-bold">{{ file.date_modified|date:"d/m/Y" }}</span></div>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>
			</div>
			{% endif %}
		</div>
	</div>
</main>
{% endblock main %}
<!-- js -->
{% block scripting %}
<script>
	$(document).ready(function () {
		handlingAccordion();
		previewingFile();
	});

	function handlingAccordion() {
		$(".accordion-header").each(function (index, element) {
			element == this;
			index++;
			$(element).attr("id", "file-heading" + index);
		});

		$(".accordion-button").each(function (index, element) {
			element == this;
			index++;
			$(element).attr("data-bs-target", "#file-collapse" + index);
			$(element).attr("aria-controls", "file-collapse" + index);
		});

		$(".accordion-collapse").each(function (index, element) {
			element == this;
			index++;
			$(element).attr("id", "file-collapse" + index);
			$(element).attr("aria-labelledby", "file-heading" + index);
		});
	}

	function previewingFile() {
		$(".preview-button").each(function (index, element) {
			// element == this
			$(this).attr("onclick", "window.location.href='" + $(this).attr("href") + "'");
		});
	}
</script>
{% endblock scripting %}
